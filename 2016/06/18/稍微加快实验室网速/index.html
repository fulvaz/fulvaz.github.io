<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="author" content="Fulvaz"><meta name="description" content="我只是个混github连击的"><title>稍微加快实验室网速 | Fulvaz PlayGroud</title><link href="/favicon.png" rel="icon"><link rel="alternate" href="/atom.xml" title="Fulvaz PlayGroud" type="application/atom.xml"><link href="http://fonts.lug.ustc.edu.cn/css?family=Open+Sans:400" rel="stylesheet"><link href="http://fonts.lug.ustc.edu.cn/css?family=Source+Code+Pro:400,600" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/stylesheets/app.css"></head><body><nav class="slide-menu"><div class="container"><div id="slide-introduction"><section id="slide-avator"></section><section id="slide-name"><p>Fulvaz</p></section><section id="slide-introduction-content"><p>半路出家伪文艺码农</p></section><section id="slide-contacts"></section></div><ul><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="https://github.com/subuta/hexo-jade-sass-barebone">Source</a></li></ul></div></nav><section id="top-head"><div id="top-head-wraper"><a href="/">Fulvaz PlayGroud</a><i id="top-head-menu-button" aria-hidden="true" class="fa fa-bars"></i></div></section><div class="wrapper"><header id="page-header"><div class="header-background-container"><video loop="true" mute="true" autoplay="true" poster="http://7xp7jw.com1.z0.glb.clouddn.com/myTheme/static/images/header-background.jpg" class="header-background-video"><source src="http://7xp7jw.com1.z0.glb.clouddn.com/myTheme/static/videos/Blurry-Lights.webm" type="video/webm"><source src="http://7xp7jw.com1.z0.glb.clouddn.com/myTheme/static/videos/Blurry-Lights.mp4" type="video/mp4"><source src="http://7xp7jw.com1.z0.glb.clouddn.com/myTheme/static/videos/Blurry-Lights.ogv" type="video/ogv"></video></div><div class="header-background-shelter"></div><div id="masthead"><div class="wrapper"><h1 id="site-title">Fulvaz PlayGroud</h1><p id="description">我只是个混github连击的</p></div></div></header><section id="content"><article class="post"><div class="article-head"><h2 class="article-title">稍微加快实验室网速</h2><div class="meta article-date">2016-06-18</div></div><div class="article-content markdown-body"><p><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>我在当年考研, 听说暨大网速好,就报了.结果网速真的很快, 除了实验室<br>update: 极路由下个VPN插件就能搭VPN服务器了<br>update: 然后最近快得不行, 不知道哪位大爷放过了我们</p>
<a id="more"></a>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><p>首先考虑是不是实验室路由器到上级路由出口带宽太小. 这个好解决, 找个人少的时间重置了实验室路由器, 重新配置了qos, 然后在高峰时段在路由器后台监控流量……嗯, 峰值200k.</p>
<p>那很有可能是公网出口带宽太小—-分配到实验室路由器的公网带宽太小. 哪里可以拿到额外的公网带宽? 宿舍. 如果可以在宿舍建一个代理服务器, 然后从实验室连接到宿舍, 通过宿舍的公网带宽连公网的话, 速度无疑会快很多.</p>
<h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><p>由于直接在路由器上做文章限制很多, 最有效可行的方案就是用ssh转发, 然后用proxifier对系统进行全局代理 (ubuntu可以直接设置)<br>ps:当然你也可以放台电脑在宿舍, 然后在windows下面建一个http服务器, 那更简单也更稳定, 毕竟有官方支持的客户端, 网上建http服务器的教程很多,可以去搜索下</p>
<h2 id="干活"><a href="#干活" class="headerlink" title="干活"></a>干活</h2><p>###ping<br>首先在实验室ping宿舍ip, 可以ping通, ping值1ms</p>
<p>###准备路由器<br>我用极路由, 其他openwrt路由器也可以, mentohust老习惯性掉线, 本想写脚本通过ping来判断掉线, 然后自动掉线重连, 但是觉得这完全没有必要, 直接半小时重启一次mentohust即可</p>
<p>###自动重启mentohust<br>用putty连接路由器<br>输入<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi <span class="regexp">/etc/</span>cront<span class="regexp">/root</span></div></pre></td></tr></table></figure></p>
<p>在最后加入<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="emphasis">*/30 *</span> <span class="bullet">* *</span> * mentohust -k</div><div class="line"><span class="emphasis">*/30 *</span> <span class="bullet">* *</span> * mentohust</div></pre></td></tr></table></figure></p>
<p>这个脚本的意思是每半个关闭mentohust, 然后启动mentohust</p>
<p>###端口转发<br>极路由可以去下一个叫超级端口转发的插件, 然后dmz自己路由器的地址, 极路由是192.168.199.1, 其他路由自行想办法dmz</p>
<p>###用putty生成socks5</p>
<p>###用proxifier全局代理<br>嗯….网上一堆, 我就不写了</p>
<h2 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h2><p>###全局代理后shadowsocks连不上了!<br>在路由器上搭好梯子, 然后弄出socks5, 自己远程连接</p>
<p>###安全性问题呢? 路由器不是暴露到公网上了?<br>嗯. 暨大是文科学校, 信科院也搬到南校区去了,我在本校. 按理说我毕业前都不会是个问题.   XD</p>
</p></div></article></section><nav id="article-list-pagination"><a href="/2016/06/22/另一种开发环境-ubuntu-windows/" title="上一页 article: 另一种开发环境- ubuntu + windows" class="prev">&larr; 上一页</a><a href="/2016/06/18/npm进阶-补漏/" title="下一页 article: npm进阶(补漏)" class="next">下一页 &rarr;</a></nav><footer id="page-footer"><nav id="footer-menu"><ul><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="https://github.com/fulvaz/hexo-theme">Source</a></li></ul></nav></footer></div><script src="/script/futil_min.js"></script><script src="/script/app_0.1_min.js"></script></body></html>