<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="author" content="Fulvaz"><meta name="description" content="我只是个混github连击的"><title>重构之痛 | Fulvaz PlayGroud</title><link href="/favicon.png" rel="icon"><link rel="alternate" href="/atom.xml" title="Fulvaz PlayGroud" type="application/atom.xml"><link href="http://fonts.lug.ustc.edu.cn/css?family=Open+Sans:400" rel="stylesheet"><link href="http://fonts.lug.ustc.edu.cn/css?family=Source+Code+Pro:400,600" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/stylesheets/app.css"></head><body><nav class="slide-menu"><div class="container"><div id="slide-introduction"><section id="slide-avator"></section><section id="slide-name"><p>Fulvaz</p></section><section id="slide-introduction-content"><p>半路出家伪文艺码农</p></section><section id="slide-contacts"></section></div><ul><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="https://github.com/subuta/hexo-jade-sass-barebone">Source</a></li></ul></div></nav><section id="top-head"><div id="top-head-wraper"><a href="/">Fulvaz PlayGroud</a><i id="top-head-menu-button" aria-hidden="true" class="fa fa-bars"></i></div></section><div class="wrapper"><header id="page-header"><div class="header-background-container"><video loop="true" mute="true" autoplay="true" poster="http://7xp7jw.com1.z0.glb.clouddn.com/myTheme/static/images/header-background.jpg" class="header-background-video"><source src="http://7xp7jw.com1.z0.glb.clouddn.com/myTheme/static/videos/Blurry-Lights.webm" type="video/webm"><source src="http://7xp7jw.com1.z0.glb.clouddn.com/myTheme/static/videos/Blurry-Lights.mp4" type="video/mp4"><source src="http://7xp7jw.com1.z0.glb.clouddn.com/myTheme/static/videos/Blurry-Lights.ogv" type="video/ogv"></video></div><div class="header-background-shelter"></div><div id="masthead"><div class="wrapper"><h1 id="site-title">Fulvaz PlayGroud</h1><p id="description">我只是个混github连击的</p></div></div></header><section id="content"><article class="post"><div class="article-head"><h2 class="article-title">重构之痛</h2><div class="meta article-date">2016-06-14</div></div><div class="article-content markdown-body"><p><!-- build time:Sat Jun 24 2017 17:11:19 GMT+0800 (CST) --><p>好吧, 之前的百度IFE的图片库偷懒不写完, 然后想进行重构, 结果扯到蛋了,脚步太大<br><a id="more"></a></p><p>脚步太大</p><hr><p>Webpack - 模块化</p><p>Babel - ES6</p><p>主要是这两个坑, 将ES5代码转到ES6修改太大, 那么不可避免就会引入bug, 本来是没事的, 有bug就调呗, 反正项目也不大, 100行代码而已. 然而后面的事情证明我太傻太天真.</p><p>Webpack + Babel调试问题</p><hr><p>好的, Babel和Webpack帮我将100行代码转成了1000行的大怪物. 嗯, 怎么调呢? 机智的我当然记起sourcemap, 可惜现实是残酷的, sourcemap似乎对CommonJS支持有问题, 结果是明明文件A报错, 提示信息变到了B上面去了.</p><p>简而言之, 没法debug了.</p><p>没单元测试</p><hr><p>按照我想实现的目标的话, 单元测试有没有根本不重要啊, 即使是之前写了, 现在变ES6也用不上了</p><p>What to do?</p><hr><ol><li><p>等待, 需要等待一个时机, 就像前端入坑一样.</p></li><li><p>深入学习Webpack和Babel, 毕竟现在这两样东西对我而言还是黑魔法, 最近一个论调让我觉得很无奈, “学习使用工具的时间比编程本身的时间还要多”, well, 我认为先深入完几个工具, 未来的工具也就那样吧.</p></li><li><p>现在沉没成本已经很高了, 随便换坑实在得不偿失.</p></li></ol><h2 id="update"><a href="#update" class="headerlink" title="update"></a>update</h2><p>如果只用es6的import和export是可以正常调试的, 猜测原因是Babel本身就会将import/export转换为CommonJS.</p><p>Next</p><hr><p>我先去做下native, 再考虑这个大坑 - -!</p><p>主要是调节下心情</p><p>PS</p><hr><p>顺便主页在移动端下的Banner视频给删掉了, 根本用不了</p><!-- rebuild by neat --></p></div></article></section><nav id="article-list-pagination"><a href="/2016/06/18/npm进阶-补漏/" title="上一页 article: npm进阶(补漏)" class="prev">&larr; 上一页</a><a href="/2016/06/02/haha/" title="下一页 article: haha" class="next">下一页 &rarr;</a></nav><footer id="page-footer"><nav id="footer-menu"><ul><li><a href="/about">About</a></li><li><a href="/archives">Archive</a></li><li><a href="https://github.com/fulvaz/hexo-theme">Source</a></li></ul></nav></footer></div><script src="/script/futil.min.js"></script><script src="/script/app_0.1.min.js"></script></body></html>